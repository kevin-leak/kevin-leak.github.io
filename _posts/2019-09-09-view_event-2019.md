---
layout:     post                    # 使用的布局（不需要改）
title:      View Event             # 标题 
subtitle:   view 的分发机制          #副标题
date:       2019-09-09              # 时间
author:     kevin-leak                      # 作者
header-img: img/post/android/bg-2019-09.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - android
---

> 文章结构
>
> 事件种类
>
> 事件处理流程
>
> 事件的冲突



需要思考几个问题：

- 从用户的角度来细分，有哪几种事件动作？
- 各种view层叠，对于事件是如何处理？如何做实验？
- 面对一个动作，处理发生冲突，如何解决？有哪些场景？



### 坐标系与事件种类

首先要搞清楚的就是android的坐标系，主要就是android有相对的坐标，有不同的方法获取参数，

主要是两个角色：view 与 windows，事件点与View自身。

下面这张图，最外面的方框代表 Windows，第二个框代表 View，第三个框是放大的 事件点

<img src="https://www.crabglory.club/img/post/android/mind/coordinate.png" />



```java
// 获取当前 事件点 与 View 的距离
event.getX event.getY 
// 获取当前 事件点 与 windows 的距离
event.RawX evnet.RawY

// 下面的左右指的是View的边界与 坐标系
// 没有加 width 和 height
view.getLeft view.getTop 
// 加 width 和 height
view.getRight view.getBottom
```

明白从客户的角度来说，可以分为哪些事件，先描述一下各种场景：

按下，抬起，滑动，滑动上下左右，滑动速度，长按，双击

这里看一张思维导图：

<img src="https://www.crabglory.club/img/post/android/mind/EVENT.png" width="400px"/>



### 事件处理机制

如何做实验？？？？

<img src="https://www.crabglory.club/img/post/android/mind/view_load_layer.png" width="300px" style="width:300px" />







#### 事件的时序机制



<img src="https://www.crabglory.club/img/post/android/mind/view_event.png" />

### 事件冲突